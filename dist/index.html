<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Testing Uploadfly Client SDK</title>
    <!-- Include your compiled TypeScript (JavaScript) file -->
  </head>
  <body>
    <form>
      <!-- Pass the event object to handleSubmit -->
      <h3>Upload a file</h3>
      <input type="file" name="file" id="file" />
      <button type="submit" id="submitBtn">Upload to Uploadfly</button>
      <button type="submit" id="deleteButton">delete a file</button>
    </form>
    <script type="module">
      import UploadflyClient from "./index.js";
      // Initialize your Uploadfly Client SDK
      const uploadflySdk = new UploadflyClient(
        "uf_99d846ef15c041a8bf6dd1bd4200cc8b"
      );
      const handleSubmit = async (event) => {
        event.preventDefault();
        const fileInput = document.getElementById("file");
        const file = fileInput.files[0];

        console.log(file);

        try {
          // Upload the file using your SDK
          const response = await uploadflySdk.uploadFile(file);
          console.log("File uploaded successfully:", response);
          console.log(response);
        } catch (error) {
          console.error("File upload error:", error);
        }
      };
      submitBtn.addEventListener("click", (event) => {
        handleSubmit(event);
      });

      deleteButton.addEventListener("click", async (event) => {
        event.preventDefault();

        try {
          // Upload the file using your SDK
          const response = await uploadflySdk.deleteFile(
            "https://cdn.uploadfly.cloud/9fpKZy/WhiteSur.jpg"
          );

          console.log("File uploaded successfully:", response);
          console.log(response);
        } catch (error) {
          console.error("File upload error:", error);
        }
      });
    </script>
  </body>
</html>
